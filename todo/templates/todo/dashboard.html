{% extends "./base.html" %} 

{% block title %}Dashboard{% endblock%}

{% block content %}
<!-- Header -->
<div class="mb-8">
    <h1 class="text-3xl lg:text-4xl font-bold text-white mb-2 capitalize">Welcome {{ user.first_name }}  {{ user.last_name }}</h1>
    <p class="text-gray-600 text-lg">Here's an overview of your tasks</p>
</div>

<!-- Row 1: Overall Stats (Your Own + Shared) -->
<div class="mb-6">
    <h2 class="text-xl font-bold text-white mb-4">üìä Overall (Your Own + Shared)</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <!-- Overall Total -->
        <div class="bg-gradient-to-br from-[#020013] to-[#1a1a3a] rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-[#F59E0B]">{{ overall_total }}</span>
                <svg class="w-8 h-8 text-[#F59E0B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">All Todos</h3>
            <p class="text-gray-300 text-sm">Total tasks</p>
        </div>
        
        <!-- Overall Completed -->
        <div class="bg-gradient-to-br from-green-800 to-green-900 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-green-300">{{ overall_done }}</span>
                <svg class="w-8 h-8 text-green-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">Completed</h3>
            <p class="text-green-200 text-sm">Finished tasks</p>
        </div>
        
        <!-- Overall In Progress -->
        <div class="bg-gradient-to-br from-blue-800 to-blue-900 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-blue-300">{{ overall_in_progress }}</span>
                <svg class="w-8 h-8 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">In Progress</h3>
            <p class="text-blue-200 text-sm">Active tasks</p>
        </div>
        
        <!-- Overall To Do -->
        <div class="bg-gradient-to-br from-yellow-700 to-yellow-800 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-yellow-200">{{ overall_todo }}</span>
                <svg class="w-8 h-8 text-yellow-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">To Do</h3>
            <p class="text-yellow-200 text-sm">Pending tasks</p>
        </div>
    </div>
</div>

<!-- Row 2: Your Own Tasks -->
<div class="mb-6">
    <h2 class="text-xl font-bold text-white mb-4">üë§ Your Own Tasks</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <!-- Owned Total -->
        <div class="bg-gradient-to-br from-[#020013] to-[#1a1a3a] rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-[#F59E0B]">{{ owned_total }}</span>
                <svg class="w-8 h-8 text-[#F59E0B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">All Todos</h3>
            <p class="text-gray-300 text-sm">Your created tasks</p>
        </div>
        
        <!-- Owned Completed -->
        <div class="bg-gradient-to-br from-green-800 to-green-900 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-green-300">{{ owned_done }}</span>
                <svg class="w-8 h-8 text-green-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">Completed</h3>
            <p class="text-green-200 text-sm">Your finished tasks</p>
        </div>
        
        <!-- Owned In Progress -->
        <div class="bg-gradient-to-br from-blue-800 to-blue-900 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-blue-300">{{ owned_in_progress }}</span>
                <svg class="w-8 h-8 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">In Progress</h3>
            <p class="text-blue-200 text-sm">Your active tasks</p>
        </div>
        
        <!-- Owned To Do -->
        <div class="bg-gradient-to-br from-yellow-700 to-yellow-800 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-yellow-200">{{ owned_todo }}</span>
                <svg class="w-8 h-8 text-yellow-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">To Do</h3>
            <p class="text-yellow-200 text-sm">Your pending tasks</p>
        </div>
    </div>
</div>

<!-- Row 3: Shared Tasks -->
<div class="mb-8">
    <h2 class="text-xl font-bold text-white mb-4">ü§ù Shared with You</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <!-- Shared Total -->
        <div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-[#F59E0B]">{{ shared_total }}</span>
                <svg class="w-8 h-8 text-[#F59E0B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">All Todos</h3>
            <p class="text-gray-300 text-sm">Shared tasks</p>
        </div>
        
        <!-- Shared Completed -->
        <div class="bg-gradient-to-br from-green-800 to-green-900 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-green-300">{{ shared_done }}</span>
                <svg class="w-8 h-8 text-green-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">Completed</h3>
            <p class="text-green-200 text-sm">Shared finished</p>
        </div>
        
        <!-- Shared In Progress -->
        <div class="bg-gradient-to-br from-blue-800 to-blue-900 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-blue-300">{{ shared_in_progress }}</span>
                <svg class="w-8 h-8 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">In Progress</h3>
            <p class="text-blue-200 text-sm">Shared active</p>
        </div>
        
        <!-- Shared To Do -->
        <div class="bg-gradient-to-br from-yellow-700 to-yellow-800 rounded-2xl p-6 text-white shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl lg:text-4xl font-bold text-yellow-200">{{ shared_todo }}</span>
                <svg class="w-8 h-8 text-yellow-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h3 class="text-lg font-semibold mb-1">To Do</h3>
            <p class="text-yellow-200 text-sm">Shared pending</p>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="bg-[#020013] border border-gray-700 rounded-2xl shadow-xl p-6 lg:p-8">
    <h2 class="text-2xl font-bold text-white mb-6">Quick Actions</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <a href="{% url 'new_todo' %}" class="group bg-gradient-to-r from-[#020013] to-[#0a0a2e] hover:from-[#0a0a2e] hover:to-[#020013] text-white p-6 rounded-xl transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg">
            <div>
                <h3 class="font-semibold text-lg">Create New Todo</h3>
                <p class="text-gray-300 text-sm">Add a new task to your list</p>
            </div>
        </a>
        
        <a href="{% url 'todos' %}" class="group bg-gradient-to-r from-[#F59E0B] to-yellow-500 hover:from-yellow-500 hover:to-[#F59E0B] text-white p-6 rounded-xl transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg">
            <div>
                <h3 class="font-semibold text-lg">View All Todos</h3>
                <p class="text-yellow-100 text-sm">Manage your existing tasks</p>
            </div>
        </a>
    </div>
</div>

<!-- Progress Section -->
{% if overall_total > 0 %}
<div class="mt-8 bg-[#020013] border border-gray-700 rounded-2xl shadow-xl p-6 lg:p-8">
    <h2 class="text-2xl font-bold text-white mb-6">Your Overall Progress</h2>
    <div class="mb-4">
        <div class="flex justify-between items-center mb-2">
            <span class="text-gray-300 font-medium">Completion Rate</span>
            <span class="text-white font-bold">{{ overall_done }}/{{ overall_total }} ({% widthratio overall_done overall_total 100 %}%)</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3">
            <div class="bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full transition-all duration-500" style="width: {% widthratio overall_done overall_total 100 %}%"></div>
        </div>
    </div>
    <p class="text-gray-300 text-sm font-bold">
        {% if overall_done == overall_total %}
            üéâ Congratulations! You've completed all your tasks!
        {% elif overall_done == 0 %}
            üí™ Let's get started! You have {{ overall_total }} task{{ overall_total|pluralize }} waiting.
        {% else %}
            üöÄ Great progress! {{ waiting_todos }} task{{ waiting_todos|pluralize }} to go.
        {% endif %}
    </p>
</div>
{% endif %}
{% endblock%}